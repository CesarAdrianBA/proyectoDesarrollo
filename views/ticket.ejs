<%- include('./layout/header') %>

<div class="container mt-5 printable">
  <h2 class="mb-4 text-center">Ticket de Compra</h2>

  <p><strong>NÃºmero de Ticket:</strong> <%= ticket.id %></p>
  <p><strong>Fecha:</strong> <%= ticket.fecha %></p>

  <table class="table table-bordered mt-3">
    <thead class="table-light">
      <tr>
        <th>Producto</th>
        <th>Precio</th>
        <th>Cantidad</th>
        <th>Subtotal</th>
      </tr>
    </thead>
    <tbody>
      <% ticket.productos.forEach(p => { %>
        <tr>
          <td><%= p.name %></td>
          <td><%= p.price %> $</td>
          <td><%= p.qty %></td>
          <td><%= p.price * p.qty %> $</td>
        </tr>
      <% }) %>
      <tr>
        <td colspan="3" class="text-end fw-bold">Total:</td>
        <td class="fw-bold"><%= ticket.total %> $</td>
      </tr>
    </tbody>
  </table>

  <div class="text-center mt-4 buttons-hide">
    <a href="/productos" class="btn btn-primary">Seguir comprando</a>
    <button class="btn btn-success" onclick="window.print()">Imprimir Ticket</button>

  </div>
</div>

<style>
    @media print {
      body * {
        visibility: hidden;
      }
      .printable, .printable * {
        visibility: visible;
      }
      .printable {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
      }
      /*Ocultar los botones contenidos en buttons-hidden*/
      .buttons-hide {
        display: none;
      }
    }
  </style>
  

<%- include('./layout/footer') %>
